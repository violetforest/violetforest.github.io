<!DOCTYPE html>
<html lang="en">
  <head>
    <title>♩ ♪ ♫ ♬ </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=yes, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" type="text/css" href="./../css/site.css">
    <style>
    body {
      margin: 0;
    }
    canvas {
      width: 100% !important;
      height: auto !important;
      margin: 0;
      padding: 0;
    }
    .info {
      position: absolute;
      width: 75px;
      height: auto;
      left: 50%;
      transform: translateX(-50%);
      bottom: 10px;
    }
    #info3 {
      position: absolute;
      width: 100%;
      padding: 5px;
      display: block;
      top: 50%;
    }
    </style>
  </head>
  <body>
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="45.5 18.6 114 165.7" enable-background="new 45.5 18.6 114 165.7" xml:space="preserve" class="info">
      <polygon fill="none" stroke="#000000" stroke-width="0.8825" points="81.1,51.9 103.1,77.1 125.9,52.7 123.6,86 157,84.9
        131.9,106.9 156.3,129.7 123,127.4 124.1,160.8 102.1,135.7 79.3,160.1 81.6,126.8 48.2,127.9 73.4,105.9 48.9,83.1 82.3,85.3 "/>
      <polygon fill="none" stroke="#000000" stroke-width="0.5" points="93.8,84 102.8,94.3 112.2,84.3 111.3,98 125,97.5 114.7,106.6
        124.7,116 111,115 111.5,128.8 102.4,118.4 93,128.5 94,114.8 80.2,115.2 90.6,106.2 80.5,96.8 94.2,97.7 "/>
      <g sketch:type="MSPage">
        <path sketch:type="MSShapeGroup" d="M86.1,137.5c0.9-0.8,2.2-0.8,3.2-0.8s1.6,1.5,1.6,1.5s1.3-5.1,4.3-5.7s3.5,1.3,3.5,1.3v-20.3
          c0,0,0-4.2,3.8-4.2s3.8,4.2,3.8,4.2v28.6c0,4.3,1.6,10.7,1.6,10.7s9.9-18.1,18.3-12.4c1.3,1.1-3.2,3.8-5.7,7.9
          c-3,5-5,12.3-5.3,13.1c-0.4,0.8-7.3,14.1-7.9,14.9c-0.6,0.8-1.9,1.3-2.2,1.8c-0.4,0.5-0.4,3.6-0.4,3.6s-2,2.7-10.1,2.7
          s-10.1-2.7-10.1-2.7s1.3-8.4,1.3-9.1s-9.2-15.9-9.2-17.9c0-2,2.4-9.4,3.8-11.9c1.5-2.5,4-1.8,4-1.8S84.8,138.7,86.1,137.5z"/>
      </g>
      <g>
        <path d="M111.5,20.9c0-0.4-0.2-0.8-0.6-1.1c-0.4-0.2-0.8-0.3-1.2-0.1l-11.9,4.9c-0.5,0.2-0.8,0.7-0.8,1.2v14.6
          c-0.4-0.1-0.7-0.2-1.1-0.2c-2,0-3.7,1.7-3.7,3.7s1.7,3.7,3.7,3.7c2,0,3.6-1.5,3.7-3.5c0-0.1,0-0.2,0-0.3V31.9l9.3-3.8v7.4
          c-0.4-0.1-0.7-0.2-1.1-0.2c-2,0-3.7,1.7-3.7,3.7c0,2,1.7,3.7,3.7,3.7c2,0,3.6-1.5,3.7-3.5c0-0.1,0-0.2,0-0.3V20.9z M108.9,22.8v1.7
          l-9.3,3.8v-1.7L108.9,22.8z M99.6,31v-1.8l9.3-3.8v1.8L99.6,31z"/>
        <g>
          <g>
            <path d="M87.7,39.7c-0.5,0-0.9-0.2-1.3-0.5c-1.6-1.6-2.5-3.7-2.5-6c0-1.7,0.5-3.4,1.5-4.8c0.6-0.8,1.7-1,2.6-0.4
              c0.8,0.6,1,1.7,0.4,2.6c-0.6,0.8-0.9,1.7-0.9,2.7c0,1.3,0.5,2.5,1.4,3.3c0.7,0.7,0.7,1.9,0,2.6C88.6,39.6,88.1,39.7,87.7,39.7z"
              />
          </g>
          <g>
            <path d="M83.7,42.7c-0.4,0-0.8-0.2-1-0.4c-2.3-2.5-3.6-5.7-3.6-9.1c0-2.9,0.9-5.7,2.7-8c0.5-0.6,1.4-0.8,2-0.3
              c0.6,0.5,0.8,1.4,0.3,2c-1.4,1.8-2.1,4-2.1,6.2c0,2.7,1,5.2,2.8,7.1c0.5,0.6,0.5,1.5-0.1,2C84.4,42.6,84,42.7,83.7,42.7z"/>
          </g>
          <g>
            <path d="M79.7,45.7c-0.3,0-0.6-0.1-0.8-0.3c-3.1-3.3-4.8-7.7-4.8-12.2c0-4.1,1.3-7.9,3.8-11.1c0.3-0.4,1-0.5,1.4-0.2
              c0.4,0.3,0.5,1,0.2,1.4c-2.2,2.8-3.4,6.2-3.4,9.8c0,4,1.5,7.9,4.2,10.8c0.4,0.4,0.4,1.1-0.1,1.4C80.2,45.6,79.9,45.7,79.7,45.7z"
              />
          </g>
          <g>
            <path d="M75.7,48.6c-0.2,0-0.3-0.1-0.5-0.2c-3.8-4.2-5.9-9.7-5.9-15.4c0-5.2,1.7-10.1,4.9-14.2c0.2-0.3,0.6-0.3,0.9-0.1
              c0.3,0.2,0.3,0.6,0.1,0.9c-3.1,3.9-4.7,8.5-4.7,13.4c0,5.4,2,10.6,5.6,14.5c0.2,0.2,0.2,0.6,0,0.9C76,48.6,75.8,48.6,75.7,48.6z"
              />
          </g>
        </g>
        <g>
          <g>
            <path d="M118.7,39.7c0.5,0,0.9-0.2,1.3-0.5c1.6-1.6,2.5-3.7,2.5-6c0-1.7-0.5-3.4-1.5-4.8c-0.6-0.8-1.7-1-2.6-0.4
              c-0.8,0.6-1,1.7-0.4,2.6c0.6,0.8,0.9,1.7,0.9,2.7c0,1.3-0.5,2.5-1.4,3.3c-0.7,0.7-0.7,1.9,0,2.6
              C117.8,39.6,118.2,39.7,118.7,39.7z"/>
          </g>
          <g>
            <path d="M122.7,42.7c0.4,0,0.8-0.2,1-0.4c2.3-2.5,3.6-5.7,3.6-9.1c0-2.9-0.9-5.7-2.7-8c-0.5-0.6-1.4-0.8-2-0.3
              c-0.6,0.5-0.8,1.4-0.3,2c1.4,1.8,2.1,4,2.1,6.2c0,2.7-1,5.2-2.8,7.1c-0.5,0.6-0.5,1.5,0.1,2C122,42.6,122.4,42.7,122.7,42.7z"/>
          </g>
          <g>
            <path d="M126.7,45.7c0.3,0,0.5-0.1,0.8-0.3c3.1-3.3,4.8-7.7,4.8-12.2c0-4.1-1.3-7.9-3.8-11.1c-0.3-0.4-1-0.5-1.4-0.2
              c-0.4,0.3-0.5,1-0.2,1.4c2.2,2.8,3.4,6.2,3.4,9.8c0,4-1.5,7.9-4.2,10.8c-0.4,0.4-0.4,1.1,0.1,1.4
              C126.2,45.6,126.4,45.7,126.7,45.7z"/>
          </g>
          <g>
            <path d="M130.7,48.6c0.2,0,0.3-0.1,0.5-0.2c3.8-4.2,5.9-9.7,5.9-15.4c0-5.2-1.7-10.1-4.9-14.2c-0.2-0.3-0.6-0.3-0.9-0.1
              c-0.3,0.2-0.3,0.6-0.1,0.9c3.1,3.9,4.7,8.5,4.7,13.4c0,5.4-2,10.6-5.6,14.5c-0.2,0.2-0.2,0.6,0,0.9
              C130.4,48.6,130.5,48.6,130.7,48.6z"/>
          </g>
        </g>
      </g>
    </svg>
    <div id="info-next">
      <a href="./../flowers">
        <svg version="1.1"
           id="Layer_1" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:dc="http://purl.org/dc/elements/1.1/"
           xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="29.7 11.2 139.1 137.6"
           enable-background="new 29.7 11.2 139.1 137.6" xml:space="preserve">
        <g transform="translate(0,-952.36218)">
          <path d="M99.2,964.1c-37.9,0-68.7,30.6-68.7,68.2s30.8,68.2,68.7,68.2s68.7-30.6,68.7-68.2S137.2,964.1,99.2,964.1z M99.2,967.3
            c36.2,0,65.5,29.1,65.5,65.1c0,36-29.3,65.1-65.5,65.1s-65.5-29.1-65.5-65.1C33.7,996.4,63,967.3,99.2,967.3z M111.9,1011.7
            c-0.9,0.1-1.6,0.8-1.5,1.7c0,0.4,0.2,0.9,0.6,1.1l19.1,16.3h-66c-0.1,0-0.2,0-0.3,0c-0.9,0.1-1.5,0.9-1.4,1.7
            c0.1,0.9,0.9,1.5,1.7,1.4h66l-19.1,16.2c-0.7,0.6-0.8,1.6-0.2,2.3c0.6,0.7,1.6,0.7,2.3,0.2l22.4-19c0.7-0.6,0.8-1.6,0.2-2.2
            c-0.1-0.1-0.1-0.1-0.2-0.2l-22.4-19C112.7,1011.8,112.3,1011.6,111.9,1011.7z"/>
        </g>
        </svg>
      </a>
    </div>
  <div id="container"></div>
    <script src="./startAudioContext.js"></script>
    <script src="./tones.js"></script>
    <script src="./ambient.js"></script>
    <script src="./../js/r79three.js"></script>
    <script src="./../js/Detector.js"></script>

    <script id="vertexShader" type="x-shader/x-vertex">
      precision mediump float;
      precision mediump int;
      uniform mat4 modelViewMatrix; // optional
      uniform mat4 projectionMatrix; // optional
      attribute vec3 position;
      attribute vec4 color;
      varying vec3 vPosition;
      varying vec4 vColor;
      void main() {
        vPosition = position;
        vColor = color;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 2 );
      }
    </script>

    <script id="fragmentShader" type="x-shader/x-fragment">
      precision mediump float;
      precision mediump int;
      uniform float time;
      varying vec3 vPosition;
      varying vec4 vColor;
      void main() {
        vec4 color = vec4( vColor );
        color.r += cos( vPosition.x * 4.0 * time ) * 0.5;
        gl_FragColor = color;
      }
    </script>

    <script>
      if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
      var container, stats;
      var camera, scene, renderer;
      var mouseX = 1000, mouseY = 1000;
      var windowHalfX = window.innerWidth / 2,
          windowHalfY = window.innerHeight / 2;
      var goldenRatio = (Math.sqrt(5) + 1) / 2 - 1,
          goldenAngle = goldenRatio + (Math.PI * 2);
      var vertices, geometry
      init();
      animate();
      function init() {
        container = document.getElementById( 'container' );
        camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 10 );
        camera.position.z = 2;
        scene = new THREE.Scene();

        // scene.background = new THREE.CubeTextureLoader()
        //   .setPath( 'textures/cube/Park3Med/' )
        //   .load( [ 'px.jpg', 'nx.jpg', 'py.jpg', 'ny.jpg', 'pz.jpg', 'nz.jpg' ] );

        // geometry
        var triangles = 500;
        geometry = new THREE.BufferGeometry();

        vertices = new Float32Array( triangles * 3 * 3 );

        for ( var i = 0, l = triangles * 3 * 3; i < l; i += 20 ) {
          vertices[ i     ] = Math.sin(Math.random() * goldenAngle);
          vertices[ i + 1 ] = Math.sin(Math.random() * goldenAngle);
          vertices[ i + 2 ] = Math.cos(Math.random() * goldenAngle);
          vertices[ i + 3 ] = Math.cos(Math.random() * goldenAngle);
        }

        geometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ).setDynamic(true) );
        var colors = new Uint8Array( triangles * 3 * 4 );
        for ( var i = 0, l = triangles * 3 * 3; i < l; i += 4 ) {
          colors[ i     ] = Math.random() * 255;
          colors[ i + 1 ] = Math.random() * 255;
          colors[ i + 2 ] = Math.random() * 255;
          colors[ i + 3 ] = Math.random() * 255;
        }
        geometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 4, true ) );
        // material
        var material = new THREE.RawShaderMaterial( {
          uniforms: {
            time: { value: 1.0 }
          },
          vertexShader: document.getElementById( 'vertexShader' ).textContent,
          fragmentShader: document.getElementById( 'fragmentShader' ).textContent,
          side: THREE.DoubleSide,
          transparent: true
        } );

        var mesh = new THREE.Mesh( geometry, material );
        scene.add( mesh );
        renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});
        renderer.setClearColor( 0xffffff, 0 );
        renderer.setPixelRatio( window.devicePixelRatio );
        renderer.setSize( window.innerWidth, window.innerHeight );
        container.appendChild( renderer.domElement );
        window.addEventListener( 'resize', onWindowResize, false );
        document.addEventListener( 'mousemove', onDocumentMouseMove, false );
        document.addEventListener( 'touchstart', onDocumentTouchStart, false );
        document.addEventListener( 'touchmove', onDocumentTouchMove, false );
      }

      function onWindowResize( event ) {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize( window.innerWidth, window.innerHeight );
      }
      function onDocumentMouseMove(event) {
        mouseX = event.clientX - windowHalfX;
        mouseY = event.clientY - windowHalfY;
        // console.log(mouseX)
      }
      function onDocumentTouchStart( event ) {
        if ( event.touches.length > 1 ) {
          event.preventDefault();
          mouseX = event.touches[ 0 ].pageX - windowHalfX;
          mouseY = event.touches[ 0 ].pageY - windowHalfY;
        }
      }
      function onDocumentTouchMove( event ) {
        if ( event.touches.length == 1 ) {
          event.preventDefault();
          mouseX = event.touches[ 0 ].pageX - windowHalfX;
          mouseY = event.touches[ 0 ].pageY - windowHalfY;
        }
      }
      //
      function animate() {
        requestAnimationFrame( animate );
        render();
      }
      function render() {
        var time = performance.now();

        var object = scene.children[ 0 ];

        // console.log({object})

        object.geometry.attributes.position.needsUpdate = true

        object.rotation.y = (time / 100000) * (mouseY / 10);
        object.rotation.x = (time / 100000) * (mouseX / 200);
        object.material.uniforms.time.value = (time / 100000) * mouseX;

        camera.position.x += ( - (mouseX / 600) - camera.position.x );
        camera.position.y += ( (mouseY / 300) - camera.position.y );
        camera.lookAt( scene.position );
        renderer.render( scene, camera );
      }
    </script>

  </body>
</html>
